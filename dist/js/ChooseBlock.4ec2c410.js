import{s as Y,j as g,e as _,f as j,o as f,c as m,a as k,F as S,k as A,n as D,t as F}from"./index.03c44043.js";import{throttle as I}from"lodash-es";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";const x={};x.getBlockList=function(){return Y({method:"get",url:"/api/list/2"})};const $={class:"container"},q=["data-id"],z={__name:"ChooseBlock",setup(G){const c=g([]),s=_(),u=_(),h=g(new Set),v=_(),b=e=>{a.x=e.layerX,a.y=e.layerY;const n=Math.min(o.x,a.x),t=Math.min(o.y,a.y),l=Math.abs(o.y-a.y),r=Math.abs(o.x-a.x),i=document.querySelectorAll(".items");for(let d of i){const{x:w,y:C}=s.value.getBoundingClientRect(),{x:M,y:E,width:R,height:X}=d.getBoundingClientRect();L(M-w,E-C,R,X,n,t,r,l)&&(h.add(parseInt(d.dataset.id)),console.log(h,c[0].id))}const y={transform:`translate(${n}px, ${t}px)`,height:l+"px",width:r+"px"};return Object.assign(u.value.style,y),{layerX:e.layerX,layerY:e.layerY}},B=()=>{const e={transform:"translate(0, 0)",height:0,width:0};Object.assign(u.value.style,e)},L=(e,n,t,l,r,i,y,d)=>!(e>r+y||n>i+d||e+t<r||n+l<i),o={x:0,y:0},a={x:0,y:0},p=I(b,20);return j(async()=>{await x.getBlockList().then(e=>{c.length=0,c.push(...e.data.data)}),s.value.addEventListener("mousedown",e=>{e.preventDefault(),o.x=e.layerX,o.y=e.layerY,s.value.addEventListener("mousemove",p)}),s.value.addEventListener("mouseup",()=>{s.value.removeEventListener("mousemove",p),B()}),console.log(v.value)}),(e,n)=>(f(),m("div",{class:"choose-page",ref_key:"container",ref:s},[k("div",{class:"mask",ref_key:"mask",ref:u},null,512),k("div",$,[(f(!0),m(S,null,A(c,t=>(f(),m("div",{class:D(["items",{choosed:h.has(t.id)}]),key:t.id,"data-id":t.id,ref_for:!0,ref_key:"itemRefs",ref:v},F(t.name),11,q))),128))])],512))}},J=O(z,[["__scopeId","data-v-7d9962ab"]]);export{J as default};
